(function($){$.extend($.fn,{commonUpload:function(options){if(this.length==0){return this};var $key=$("#keyword");var bindUpload=function(){var defaultSetting={swf:'js/uploadify/uploadify.swf',uploader:'../resourceOperation/upload.json?user='+user+"&mark=0",removeCompleted:true,buttonText:'',fileSizeLimit:'30MB',formData:{},preventCaching:false,onUploadSuccess:function(file,data,response){data=eval('('+data+')');var keys=data.keys},onUploadError:function(file,errorCode,errorMsg,errorString){$.messager.alert('The file '+file.name+' could not be uploaded: '+errorString)}};var setting=$.extend({},defaultSetting,options);this.uploadify(setting)};return this.each(function(){var $this=$(this);if(this.tagName.toLowerCase!="input"&&$this.attr("id")==""){throw Error("dom必须为input且id不能为空");return};bindUpload.apply($this)})}})})(jQuery);